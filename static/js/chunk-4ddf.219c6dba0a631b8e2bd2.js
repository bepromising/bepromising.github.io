(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4ddf"],{2877:function(t,e,n){"use strict";function a(t,e,n,a,s,i,r,o){var c,l="function"===typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=n,l._compiled=!0),a&&(l.functional=!0),i&&(l._scopeId="data-v-"+i),r?(c=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},l._ssrRegister=c):s&&(c=o?function(){s.call(this,this.$root.$options.shadowRoot)}:s),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(t,e){return c.call(e),u(t,e)}}else{var h=l.beforeCreate;l.beforeCreate=h?[].concat(h,c):[c]}return{exports:t,options:l}}n.d(e,"a",function(){return a})},4917:function(t,e,n){n("214f")("match",1,function(t,e,n){return[function(n){"use strict";var a=t(this),s=void 0==n?void 0:n[e];return void 0!==s?s.call(n,a):new RegExp(n)[e](String(a))},n]})},"88e9":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{ref:"mainWrap",staticClass:"wrap",class:{hide:!t.menu.status}},[a("header",{staticClass:"header"},[a("i",{staticClass:"logo"},[t._v("案件分析")]),a("div",{staticClass:"loginInfo"},[a("Dropdown",{attrs:{trigger:"click"},on:{"on-click":t.dropDownHandler}},[a("a",{attrs:{href:"javascript:void(0)"}},[t._v("\n                    欢迎您，"+t._s(t.user.name)+"\n                    "),a("Icon",{attrs:{type:"md-arrow-dropdown",size:"18"}})],1),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[a("DropdownItem",{attrs:{name:"logout"}},[a("Icon",{attrs:{type:"md-log-out"}}),t._v(" 安全退出")],1),a("DropdownItem",{attrs:{name:"changePassword"}},[a("Icon",{attrs:{type:"md-unlock"}}),t._v(" 修改密码")],1)],1)],1)],1)]),a("section",{ref:"leftMenu",staticClass:"leftMenu",class:{hide:!t.menu.status}},[t.menu.tree.length>0?a("Menu",{ref:"menuComponent",attrs:{theme:"dark",width:"auto",id:"leftMenu","open-names":t.menu.openNames,"active-name":t.menu.activeName},on:{"on-select":t.refreshTabs}},[t._l(t.menu.tree,function(e){return[e.children?a("Submenu",{key:e.id,attrs:{name:e.id}},[a("template",{slot:"title"},[a("Icon",{attrs:{type:e.icon,size:"14"}}),t._v(t._s(e.name))],1),t._l(e.children,function(e){return[e.children?a("Submenu",{key:e.id,attrs:{name:e.id}},[a("template",{slot:"title"},[a("Icon",{attrs:{type:e.icon,size:"14"}}),t._v(t._s(e.name))],1),t._l(e.children,function(e){return a("MenuItem",{key:e.id,staticClass:"menuLink",attrs:{name:e.id,to:e.url||""}},[a("Icon",{attrs:{type:e.icon}}),t._v(" "+t._s(e.name)+"\n                            ")],1)})],2):a("MenuItem",{key:e.id,staticClass:"menuLink",attrs:{name:e.id,to:e.url||""}},[a("Icon",{attrs:{type:e.icon}}),t._v(" "+t._s(e.name)+"\n                        ")],1)]})],2):a("MenuItem",{key:e.id,staticClass:"menuLink",attrs:{name:e.id,to:e.url||""}},[a("Icon",{attrs:{type:e.icon,size:"14"}}),t._v(" "+t._s(e.name)+"\n                ")],1)]})],2):t._e()],1),a("div",{staticClass:"menuMin",class:{hide:!t.menu.status},on:{click:t.toggleMenu}},[a("Icon",{attrs:{type:!0===t.menu.status?"ios-arrow-back":"ios-arrow-forward"}})],1),a("section",{staticClass:"mainContent",class:{scrollDisable:t.loading,tabEnabled:t.tabs.enabled}},[a("transition",{attrs:{name:"fade"}},[t.loading?a("div",{staticClass:"loading"},[a("img",{attrs:{src:n("cf1c")}})]):t._e()]),a("transition",{attrs:{name:"fade"}},[t.tabs.popMenu.show?a("div",{staticClass:"tabsRightMenu",style:t.tabs.popMenu.style},t._l(t.tabs.popMenu.data,function(e,n){return a("i",{key:n,on:{click:function(n){t.closeTabs(e.action)}}},[t._v(t._s(e.name))])})):t._e()]),t.tabs.popMenu.show?a("div",{staticClass:"mask",on:{click:t.clickMask}}):t._e(),t.tabs.data.length>0&&t.tabs.enabled?a("div",{ref:"tabs",staticClass:"tabsWrap"},[a("Icon",{directives:[{name:"show",rawName:"v-show",value:t.tabs.showScrollPrev,expression:"tabs.showScrollPrev"}],staticClass:"scroll-btn prev",attrs:{type:"chevron-left"},nativeOn:{click:function(e){return t.tabPrev(e)}}}),a("ul",{style:{minWidth:t.tabs.width+"px",marginLeft:t.tabs.scrollLeft+"px"}},t._l(t.tabs.data,function(e){return a("li",{key:e.id,class:{act:e.act},on:{click:function(n){if(n.target!==n.currentTarget)return null;t.refreshTabs(e.id)},contextmenu:function(e){return e.target!==e.currentTarget?null:(e.preventDefault(),t.showPopMenu(e))}}},[t._v(t._s(e.title)+"\n                    "),a("Icon",{staticClass:"icon",attrs:{type:"md-close",size:"12"},nativeOn:{click:function(n){t.closeTab(e.id)}}})],1)})),a("Icon",{directives:[{name:"show",rawName:"v-show",value:t.tabs.showScrollNext,expression:"tabs.showScrollNext"}],staticClass:"scroll-btn next",attrs:{type:"chevron-right"},nativeOn:{click:function(e){return t.tabNext(e)}}})],1):t._e(),a("section",{staticClass:"viewWrap",class:{tabEnabled:t.tabs.enabled}},[a("keep-alive",[t.tabs.enabled&&t.$route.meta.keepAlive?a("router-view"):t._e()],1),t.tabs.enabled&&t.$route.meta.keepAlive?t._e():a("router-view")],1)],1)])},s=[],i=(n("20d6"),n("a481"),n("7f7f"),n("ac6a"),n("7514"),n("f751"),n("c93e")),r=(n("cadf"),n("551c"),n("097d"),n("f121")),o=n("ed08"),c=n("41cb"),l={methods:{dropDownHandler:function(t){var e=this;switch(t){case"logout":this.$Modal.confirm({title:"系统提示",content:"您是否要退出系统？",onOk:function(){var t=e.$session("user");e.$http({method:"post",url:r["c"].API.loginOut,params:{tokenId:t.tokenId}}),sessionStorage.clear(),location.reload()}});break}}},created:function(){var t=this,e=this.$session("user");e&&Object.assign(this.$http.defaults.headers.post,{"x-shsoft-authorization":e.token}),this.$store.dispatch(r["c"].action.getAuthMenus,{http:this.$http,callback:function(e){0===e.length&&t.$Modal.error({title:"系统提示",content:"当前账户未授权，请联系管理员！"}),t.initLayout(e);var n=t.$router.currentRoute;if("/"===n.path){for(var a=null,s=0,i=e.length;s<i;s++)if(e[s].url&&!a){a=e[s].url;break}a&&t.$router.push(a)}else t.$router.push(n.path)}})}};c["a"].beforeEach(function(t,e,n){"NotFound"===t.name?n():"Layout"===t.matched[0].name?Object(o["b"])("user")?n():n("/login"):n()});var u=n("bedf"),h=n("2f62"),d={data:function(){return{mainWidth:0,menu:{status:!0,width:0,data:[],tree:[],openNames:[],activeName:null},user:{name:"admin"},tabs:{data:[],width:"100%",enabled:r["a"].tabs.enabled,showScrollNext:!1,showScrollPrev:!1,scrollLeft:0,popMenu:{show:!1,style:{},data:[{name:"关闭当前",action:"current"},{name:"关闭其他",action:"others"},{name:"关闭全部",action:"all"}]}}}},computed:Object(i["a"])({},Object(h["b"])({loading:function(t){return t.system.loading},menuState:function(t){return t.system.menuState}})),mixins:[l],methods:{toggleMenu:function(){this.menu.status=!this.menu.status},showPopMenu:function(t){Object.assign(this.tabs.popMenu,{show:!0,style:{left:t.clientX+"px",top:t.clientY+"px"}})},clickMask:function(){this.tabs.popMenu.show=!1},activeTab:function(t){var e=this.menu.data.find(function(e){return e.id===t});if(e.url){var n=this.tabs.data.find(function(e){return e.id===t});this.tabs.data.forEach(function(t){t.act=!1}),this.currentMenu=t,n?n.act=!0:(this.tabs.data.push({title:e.name,id:e.id,act:!0,url:e.url,index:this.tabs.data.length,name:e.url?e.url.replace("-",","):e.name}),this.$nextTick(function(){this.setKeepAlive(t,!0)})),this.$router.push(e.url)}},refreshTabs:function(t){var e=this;if(!r["a"].tabs.enabled)return!1;var n=this.tabs.data.find(function(e){return e.id===t});if(this.tabs.data.length>=r["a"].tabs.max&&!n)switch(r["a"].tabs.handlerType){case 1:this.$Message.warning("您当前打开窗口过多，会影响系统性能！"),this.activeTab(t);break;case 2:this.$Modal.confirm({width:500,title:"系统提示",content:"您当前打开窗口过多，会影响系统性能！",okText:"覆盖",cancelText:"新开",closable:!0,onOk:function(){e.tabs.data.splice(0,1),e.activeTab(t)},onCancel:function(){e.activeTab(t)}});break;case 3:this.tabs.data.splice(0,1),this.activeTab(t);break}else this.activeTab(t);var a=20,s=this.tabs.data.findIndex(function(e){return e.id===t}),i=0;this.tabs.data.forEach(function(t,e){a+=14*t.title.length+56,e===s&&(i=a)}),this.mainWidth>0&&a>this.mainWidth&&(this.tabs.showScrollNext=!0),i>this.mainWidth&&(this.tabs.scrollLeft=-(i-58-this.mainWidth),this.tabs.showScrollPrev=!0),this.tabs.width=a},setKeepAlive:function(t,e){var n=this.$router.options.routes.find(function(t){return"Layout"===t.name}),a=this.tabs.data.find(function(e){return e.id===t});if(n&&a){var s=n.children.find(function(t){return t.name===a.name});s&&(s.meta.keepAlive=e)}},closeTabs:function(t){var e=this;switch(t){case"current":this.closeTab(this.currentMenu);break;case"all":this.tabs.data=[],Object.assign(this.tabs,{width:"100%",showScrollNext:!1,showScrollPrev:!1,scrollLeft:0});break;case"others":this.tabs.data=this.tabs.data.filter(function(t){return t.id===e.currentMenu}),Object.assign(this.tabs,{width:"100%",scroll:0,showScrollNext:!1,showScrollPrev:!1,scrollLeft:0}),this.currentMenu=this.tabs.data[this.tabs.data.length-1].id;break}this.tabs.popMenu.show=!1},closeTab:function(t){if(this.setKeepAlive(t,!1),this.tabs.data=this.tabs.data.filter(function(e){return e.id!==t}),this.tabs.data.length>0){var e=this.tabs.data[this.tabs.data.length-1];this.$router.push(e.url),e.act=!0,this.currentMenu=e.id}},tabNext:function(){var t=this.tabs.width+this.tabs.scrollLeft-this.mainWidth;t>0&&(t>this.mainWidth?this.tabs.scrollLeft=-this.mainWidth+this.tabs.scrollLeft:(this.tabs.scrollLeft=-(this.tabs.width-this.mainWidth+10),this.tabs.showScrollNext=!1)),this.tabs.showScrollPrev=!0},tabPrev:function(){this.tabs.scrollLeft+this.mainWidth<0?(this.tabs.scrollLeft+=this.mainWidth,this.tabs.showScrollNext=!0):(this.tabs.scrollLeft=0,this.tabs.showScrollNext=!0,this.tabs.showScrollPrev=!1)},initLayout:function(t){this.menu.data=Object(u["a"])(t),this.menu.tree=Object(u["d"])(t,"0")},findCurrentRoute:function(){var t=this,e=this.menu.data.find(function(e){return e.url===t.$router.currentRoute.path});e&&function(){var n=e.parentId,a=null,s=e.id;while("0"!==n)a=t.menu.data.find(function(t){return n===t.id}),n=a.parentId,s=a.id;Object.assign(t.menu,{activeName:e.id,openNames:[s]}),t.refreshTabs(e.id)}()}},watch:{$route:function(){this.findCurrentRoute()},"tabs.data":function(t){0===t.length&&(this.$router.push("/"),Object.assign(this.menu,{openNames:[],activeName:null}))}},mounted:function(){this.mainWidth=this.$refs.mainWrap.clientWidth,this.menu.width=this.$refs.leftMenu.clientWidth}},f=d,b=(n("f808"),n("2877")),m=Object(b["a"])(f,a,s,!1,null,null,null);m.options.__file="Layout.vue";e["default"]=m.exports},bedf:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return r}),n.d(e,"c",function(){return i}),n.d(e,"d",function(){return s});n("a481"),n("4917"),n("f751");var a=function(t){var e=JSON.stringify(t);return JSON.parse(e)},s=function t(e){for(var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"parentId",i=[],r=0,o=e.length;r<o;r++)if(e[r][s]==a){var c=e[r];n=t(e,e[r].id,s),n.length>0&&(c.children=n),i.push(c)}return i},i=function t(e,n,a){for(var s,i=[],r=Object.assign({parentKey:"parentId",idKey:"id",childrenKey:"children"},n),o=0,c=e.length;o<c;o++)if(e[o][r.parentKey]==a){var l={};for(var u in r.map)l[r.map[u]]=e[o][u];s=t(e,n,e[o][r.idKey]),s.length>0&&(l[r.childrenKey]=s),i.push(l)}return i},r=function(t,e){var n=/\$\{\w+\}/,a=t.match(n);while(a){var s=a[0],i=e[s.replace(/\$\{(\w+)\}/,"$1")];t=t.replace(s,i),a=t.match(n)}return t}},c727:function(t,e,n){},cf1c:function(t,e,n){t.exports=n.p+"img/loading.1ead16c1.gif"},f808:function(t,e,n){"use strict";var a=n("c727"),s=n.n(a);s.a}}]);