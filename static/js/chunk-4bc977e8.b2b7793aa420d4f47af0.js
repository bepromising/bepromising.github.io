(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4bc977e8"],{2877:function(e,t,n){"use strict";function r(e,t,n,r,o,a,i,s){var c,_="function"===typeof e?e.options:e;if(t&&(_.render=t,_.staticRenderFns=n,_._compiled=!0),r&&(_.functional=!0),a&&(_._scopeId="data-v-"+a),i?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(i)},_._ssrRegister=c):o&&(c=s?function(){o.call(this,this.$root.$options.shadowRoot)}:o),c)if(_.functional){_._injectStyles=c;var u=_.render;_.render=function(e,t){return c.call(t),u(e,t)}}else{var l=_.beforeCreate;_.beforeCreate=l?[].concat(l,c):[c]}return{exports:e,options:_}}n.d(t,"a",function(){return r})},"386d":function(e,t,n){n("214f")("search",1,function(e,t,n){return[function(n){"use strict";var r=e(this),o=void 0==n?void 0:n[t];return void 0!==o?o.call(n,r):new RegExp(n)[t](String(r))},n]})},"3b2b":function(e,t,n){var r=n("7726"),o=n("5dbc"),a=n("86cc").f,i=n("9093").f,s=n("aae3"),c=n("0bfb"),_=r.RegExp,u=_,l=_.prototype,d=/a/g,f=/a/g,h=new _(d)!==d;if(n("9e1e")&&(!h||n("79e5")(function(){return f[n("2b4c")("match")]=!1,_(d)!=d||_(f)==f||"/a/i"!=_(d,"i")}))){_=function(e,t){var n=this instanceof _,r=s(e),a=void 0===t;return!n&&r&&e.constructor===_&&a?e:o(h?new u(r&&!a?e.source:e,t):u((r=e instanceof _)?e.source:e,r&&a?c.call(e):t),n?this:l,_)};for(var p=function(e){e in _||a(_,e,{configurable:!0,get:function(){return u[e]},set:function(t){u[e]=t}})},g=i(u),m=0;g.length>m;)p(g[m++]);l.constructor=_,_.prototype=l,n("2aba")(r,"RegExp",_)}n("7a56")("RegExp")},4917:function(e,t,n){n("214f")("match",1,function(e,t,n){return[function(n){"use strict";var r=e(this),o=void 0==n?void 0:n[t];return void 0!==o?o.call(n,r):new RegExp(n)[t](String(r))},n]})},b979:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("ul",{staticClass:"filter",on:{keypress:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.search(t):null}}},[n("li",{staticClass:"item"},[n("i",[e._v("姓名：")]),n("Input",{staticClass:"fill",attrs:{placeholder:"请输入姓名"},model:{value:e.condition.name,callback:function(t){e.$set(e.condition,"name",t)},expression:"condition.name"}})],1),n("li",{staticClass:"item"},[n("i",[e._v("用户名：")]),n("Input",{staticClass:"fill",attrs:{placeholder:"请输入姓名"},model:{value:e.condition.userAcct,callback:function(t){e.$set(e.condition,"userAcct",t)},expression:"condition.userAcct"}})],1),n("li",{staticClass:"item"},[n("Button",{attrs:{type:"info",shape:"circle",icon:"ios-search"},on:{click:e.search}},[e._v("查询")])],1)]),n("Table",{attrs:{stripe:"",columns:e.table.columns,data:e.table.data,loading:e.table.loading}}),n("Page",{staticClass:"page-wrap",attrs:{total:e.table.total,current:e.table.current,"page-size":e.table.size,"show-total":""},on:{"on-change":e.changePage}}),n("Modal",{attrs:{title:e.formModal.title,closable:""},model:{value:e.formModal.show,callback:function(t){e.$set(e.formModal,"show",t)},expression:"formModal.show"}},[n("Tree",{ref:"roleTree",staticStyle:{margin:"50px"},attrs:{data:e.formModal.data,multiple:"","show-checkbox":""},on:{"on-check-change":e.selectChange}}),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"success",disabled:!e.formModal.isChecked},on:{click:e.save}},[e._v("保存")]),n("Button",{on:{click:e.back}},[e._v("取消")])],1)],1)],1)},o=[],a=(n("386d"),n("7f7f"),n("c93e")),i=(n("f751"),n("0db3")),s=n("f121"),c=n("e069"),_=(n("bedf"),n("cadb")),u={name:"User",data:function(){var e=this;this.$createElement;return{condition:{name:null,userAcct:null},table:{columns:[{type:"index",width:60,align:"center",title:"序号"},{title:"用户名",key:"userAcct",align:"center"},{title:"姓名",key:"name",align:"center"},{title:"用户所属",key:"typeValue",align:"center"},{title:"创建时间",key:"createDt",align:"center",render:function(e,t){var n=t.row;return e("div",[Object(_["a"])(n.createDt)])}},{title:"更新时间",key:"updateDt",align:"center",render:function(e,t){var n=t.row;return e("div",[Object(_["a"])(n.updateDt)])}},{title:"使用状态",key:"stateValue",align:"center"},{title:"操作",key:"view",align:"center",width:280,render:function(t,n){var r=n.row;return t("div",[t(c["Button"],{attrs:{type:"info",size:"small"},style:"margin-right:5px",on:{click:function(){e.showModal(r,"0")}}},["设置角色"]),t(c["Button"],{attrs:{type:"primary",size:"small"},style:"margin-right:5px",on:{click:function(){e.showModal(r,"1")}}},["设置部门"]),t(c["Button"],{attrs:{type:"success",size:"small"},style:"margin-right:5px",on:{click:function(){e.showModal(r,"2")}}},["设置镇街"])])}}],data:[],size:s["a"].pageSize,current:1,total:0,loading:!1},formModal:{show:!1,title:null,fields:{userId:null,groupType:null},data:[],selectNodes:[],isChecked:!1}}},components:{Tree:i["a"]},methods:{back:function(){this.formModal.show=!1},selectChange:function(e){this.formModal.isChecked=!0,this.formModal.selectNodes=e},save:function(){var e=this,t={userId:this.formModal.fields.userId,groupType:this.formModal.fields.groupType};t.groupIds=this.formModal.selectNodes.map(function(e){return e.id}),this.$http({method:"post",url:s["c"].API.userSaveGroup,data:t}).then(function(t){var n=t.data;n.success?(Object.assign(e.formModal,{show:!1,title:null,selectNodes:[],data:[],isChecked:!1}),e.$Message.success("保存成功！")):e.$Message.error("系统错误!"+n.error.errorMessage)})},search:function(){var e=this;this.table.loading=!0,this.$http({method:"post",url:s["c"].API.userList,data:Object(a["a"])({},this.condition,{pageNum:this.table.current,pageSize:this.table.size})}).then(function(t){var n=t.data;e.table.loading=!1,n.success?Object.assign(e.table,{data:n.result.list,total:n.result.total}):e.$Message.error(n.error.errorMessage)}).catch(function(t){e.table.loading=!1,e.$Message.error("系统繁忙，请刷新重试！")})},showModal:function(e,t){var n=this,r=s["c"].dict.groupType[t];this.$http({method:"post",url:s["c"].API.userListGroup,data:{userId:e.id,type:t}}).then(function(o){var a=o.data;a.success&&a.result.length>0&&(n.formModal.fields.userId=e.id,n.formModal.fields.groupType=t,Object.assign(n.formModal,{show:!0,title:"设置".concat(e.name).concat(r),data:a.result,selectNodes:[],isChecked:!1}))}).catch(function(e){n.$Message.error("系统繁忙，请刷新重试！")})},changePage:function(e){this.table.current=e,this.search()}},created:function(){this.search()}},l=u,d=n("2877"),f=Object(d["a"])(l,r,o,!1,null,null,null);f.options.__file="user.vue";t["default"]=f.exports},bedf:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return a}),n.d(t,"d",function(){return o});n("a481"),n("4917"),n("f751");var r=function(e){var t=JSON.stringify(e);return JSON.parse(t)},o=function e(t){for(var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"parentId",a=[],i=0,s=t.length;i<s;i++)if(t[i][o]==r){var c=t[i];n=e(t,t[i].id,o),n.length>0&&(c.children=n),a.push(c)}return a},a=function e(t,n,r){for(var o,a=[],i=Object.assign({parentKey:"parentId",idKey:"id",childrenKey:"children"},n),s=0,c=t.length;s<c;s++)if(t[s][i.parentKey]==r){var _={};for(var u in i.map)_[i.map[u]]=t[s][u];o=e(t,n,t[s][i.idKey]),o.length>0&&(_[i.childrenKey]=o),a.push(_)}return a},i=function(e,t){var n=/\$\{\w+\}/,r=e.match(n);while(r){var o=r[0],a=t[o.replace(/\$\{(\w+)\}/,"$1")];e=e.replace(o,a),r=e.match(n)}return e}},cadb:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",function(){return format}),__webpack_require__.d(__webpack_exports__,"a",function(){return dateTimeFomat});var core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("3b2b"),core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("a481"),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("6b54"),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_2__),_num__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("d9bc"),secondToHour=function(e){return e>0?Math.round(e/60):0},format=function format(_format,time){var timeStyle={yyyy:function(e){return e.getFullYear()},yy:function(e){return e.getFullYear().toString().substr(2,2)},MM:function(e){return Object(_num__WEBPACK_IMPORTED_MODULE_3__["a"])(e.getMonth()+1,2)},M:function(e){return e.getMonth()+1},dd:function(e){return Object(_num__WEBPACK_IMPORTED_MODULE_3__["a"])(e.getDate(),2)},d:function(e){return Object(_num__WEBPACK_IMPORTED_MODULE_3__["a"])(e.getDate(),2)},hh:function(e){return Object(_num__WEBPACK_IMPORTED_MODULE_3__["a"])(e.getHours(),2)},mm:function(e){return Object(_num__WEBPACK_IMPORTED_MODULE_3__["a"])(e.getMinutes(),2)},ss:function(e){return Object(_num__WEBPACK_IMPORTED_MODULE_3__["a"])(e.getSeconds(),2)}};for(var k in time=time?new Date(time):new Date,timeStyle)eval("/("+k+")/g").test(_format)&&(_format=_format.replace(RegExp.$1,timeStyle[k](time)));return _format},dateFormat=function(e){return format("yyyy-MM-dd",e)},dateTimeFomat=function(e){return format("yyyy-MM-dd hh:mm:ss",e)},getCurrentQuater=function(e){var t=e?new Date(e):new Date,n=t.getMonth(),r=["第一季","第二季","第三季度","第四季度"];return r[Math.floor(n/3)]},getPrevQuater=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=t?new Date(t):new Date,r=n.getMonth(),o=["第一季","第二季","第三季度","第四季度"],a=Math.floor(r/3),i={};return a>0?(i.year=n.getFullYear().toString(),i.quater=o[a-1]):(i.year=(n.getFullYear()-1).toString(),i.quater=o[3]),e?i:i.year},getPrevMonth=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"string",t=arguments.length>1?arguments[1]:void 0,n=t?new Date(t):new Date,r=n.getMonth(),o=n.getFullYear();return 0===r&&(o-=1,r=12),"string"===e?[o,Object(_num__WEBPACK_IMPORTED_MODULE_3__["a"])(r,2)].join("-"):{year:o.toString(),month:r.toString()}}},d9bc:function(e,t,n){"use strict";n.d(t,"a",function(){return r});n("6b54");var r=function(e){return e<10?"0"+e.toString():e}}}]);