(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["4786"],{4786:function(e,r,t){"use strict";t.r(r);var a=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("section",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticClass:"system-menu-edit"},[t("div",{staticClass:"treeMenu"},[t("Tree",{ref:"menuTree",attrs:{data:e.baseData},on:{"on-select-change":e.selectNode}})],1),t("div",{staticClass:"system-edit-content"},[t("h1",[e._v("基本信息")]),t("div",{staticClass:"edit-box"},[t("Form",{ref:"resourceForm",attrs:{model:e.resourceForm,rules:e.ruleValidate,"label-width":120}},[t("FormItem",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"资源ID",prop:"id"}},[t("Input",{attrs:{readonly:"",placeholder:"请在左边树形菜单选择"},model:{value:e.resourceForm.id,callback:function(r){e.$set(e.resourceForm,"id",r)},expression:"resourceForm.id"}})],1),t("FormItem",{attrs:{label:"资源名称",prop:"name"}},[t("Input",{attrs:{placeholder:"请在左边树形菜单选择"},model:{value:e.resourceForm.name,callback:function(r){e.$set(e.resourceForm,"name",r)},expression:"resourceForm.name"}})],1),t("FormItem",{attrs:{label:"资源编号",prop:"code"}},[t("Input",{attrs:{readonly:"",placeholder:"请在左边树形菜单选择"},model:{value:e.resourceForm.code,callback:function(r){e.$set(e.resourceForm,"code",r)},expression:"resourceForm.code"}})],1),t("FormItem",{attrs:{label:"链接地址",prop:"url"}},[t("Input",{attrs:{readonly:""},model:{value:e.resourceForm.url,callback:function(r){e.$set(e.resourceForm,"url",r)},expression:"resourceForm.url"}})],1),t("FormItem",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"上级资源",prop:"parentId"}},[t("Input",{attrs:{readonly:""},model:{value:e.resourceForm.parentId,callback:function(r){e.$set(e.resourceForm,"parentId",r)},expression:"resourceForm.parentId"}})],1),t("FormItem",{attrs:{label:"上级资源名称",prop:"parentName"}},[t("Input",{attrs:{readonly:""},model:{value:e.resourceForm.parentName,callback:function(r){e.$set(e.resourceForm,"parentName",r)},expression:"resourceForm.parentName"}})],1),t("FormItem",{attrs:{label:"类型",prop:"type"}},[t("RadioGroup",{attrs:{disabled:""},model:{value:e.resourceForm.type,callback:function(r){e.$set(e.resourceForm,"type",r)},expression:"resourceForm.type"}},[t("Radio",{attrs:{label:"0",disabled:""}},[e._v("模块")]),t("Radio",{attrs:{label:"1",disabled:""}},[e._v("菜单")]),t("Radio",{attrs:{label:"2",disabled:""}},[e._v("功能")])],1)],1),t("FormItem",{attrs:{label:"使用状态",prop:"state"}},[t("RadioGroup",{attrs:{disabled:""},model:{value:e.resourceForm.state,callback:function(r){e.$set(e.resourceForm,"state",r)},expression:"resourceForm.state"}},[t("Radio",{attrs:{label:"1",disabled:""}},[e._v("启用")]),t("Radio",{attrs:{label:"0",disabled:""}},[e._v("停用")])],1)],1),t("FormItem",{attrs:{label:"备注",prop:"description"}},[t("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5}},model:{value:e.resourceForm.description,callback:function(r){e.$set(e.resourceForm,"description",r)},expression:"resourceForm.description"}})],1),t("FormItem",[t("Button",{staticStyle:{display:"block",margin:"0 auto"},attrs:{type:"primary"},on:{click:e.save}},[e._v("提交")])],1)],1)],1)])])},s=[],o=(t("f751"),t("f121")),l=t("0db3"),c=t("7c9b"),u={name:"Resource",data:function(){return{resourceForm:{id:null,name:null,code:null,url:null,parentId:null,parentName:null,description:null,state:"1",type:"0"},ruleValidate:{},baseData:[],currentNode:null}},methods:{updateTree:function(e){var r=this;this.$http({method:"post",url:o["c"].API.resourceTree}).then(function(t){var a=t.data;a.success&&r.baseData.update(a.result,e)})},save:function(){var e=this;this.$refs["resourceForm"].validate(function(r){r?e.$http({method:"post",url:o["c"].API.resourceUpdate,data:e.resourceForm}).then(function(r){var t=r.data;t.success?(Object.assign(t.result,{selected:e.currentNode.selected,checked:e.currentNode.checked,expand:e.currentNode.expand}),e.baseData.update(t.result),e.$Message.success("提交成功!"),Object.reset(e.resourceForm,null,["state"])):e.$Message.error("提交失败!"+t.error.errorMessage)},function(e){}):e.$Message.error("请填写必填项!")})},selectNode:function(e){var r=this;this.$http({method:"post",url:o["c"].API.resourceGet,data:{id:e[0].id,url:e[0].url}}).then(function(t){var a=t.data;a.success&&(r.currentNode=e[0],Object(c["c"])(r.resourceForm,a.result))})}},components:{Tree:l["a"]},created:function(){var e=this;this.$http({method:"post",url:o["c"].API.resourceTree}).then(function(r){var t=r.data;t.success?e.baseData=t.result:e.baseData=[]})}},n=u,d=t("2877"),i=Object(d["a"])(n,a,s,!1,null,null,null);i.options.__file="resource.vue";r["default"]=i.exports}}]);